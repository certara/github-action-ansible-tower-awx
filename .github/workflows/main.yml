name: 'Test Run Ansible Tower/AWX'

on: [push]

jobs:
  test_ansible_tower:
    runs-on: ubuntu-latest
    steps:
      # To use this repository's private action,
      # you must check out the repository
      - name: Checkout
        uses: actions/checkout@v2
      - name: Trial Run Ansible Tower
        id: ansible
        uses: ./
        with:
          ansible-tower-user: ${{ secrets.CERTARA_ANSIBLE_TOWER_USER }}
          ansible-tower-pass: ${{ secrets.CERTARA_ANSIBLE_TOWER_PASSWORD }}
          ansible-tower-url: ${{ secrets.CERTARA_ANSIBLE_TOWER_URL }}
          template-id: '38'
          additional-vars: |
            {
                "var_aws_environment": "test"
            }
